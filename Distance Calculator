<!DOCTYPE html>
<html>
<head>
  <title>Leaflet Map with Distance Calculator Widget</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map {
      height: 400px;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <form id="distance-form">
    <label for="location1">Location 1:</label>
    <input type="text" id="location1" placeholder="Enter location 1" required />
    <br />
    <label for="location2">Location 2:</label>
    <input type="text" id="location2" placeholder="Enter location 2" required />
    <br />
    <button type="submit">Calculate Distance</button>
  </form>
  <div id="result"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Initialize the map
    var map = L.map('map').setView([latitude, longitude], zoom);

    // Add the map layer from QGIS on GitHub (replace 'URL_TO_GEOJSON' with the actual URL)
    var qgisLayer = L.geoJSON(null).addTo(map);
    fetch('URL_TO_GEOJSON')
      .then(response => response.json())
      .then(data => {
        qgisLayer.addData(data);
        map.fitBounds(qgisLayer.getBounds());
      });

    // Function to calculate the distance between two locations
    function calculateDistance() {
      var location1 = L.latLng(parseFloat(document.getElementById('location1').value));
      var location2 = L.latLng(parseFloat(document.getElementById('location2').value));
      var distance = location1.distanceTo(location2);

      // Display the distance result
      document.getElementById('result').innerHTML = 'Distance: ' + distance.toFixed(2) + ' meters';
    }

    // Event listener for the form submission
    document.getElementById('distance-form').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent form submission

      calculateDistance();
    });
  </script>
</body>
</html>
